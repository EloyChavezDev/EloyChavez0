<div class="search-container">
  <div class="search-header">
    <h2 class="text-2xl font-bold mb-4">Búsqueda</h2>
    <p class="text-gray-600 dark:text-gray-400 mb-6">Busca en todo el contenido del sitio</p>
  </div>
  <div id="search" class="min-h-[400px]">
    <div class="loading-state text-center py-8">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"></div>
      <p class="mt-4 text-gray-600 dark:text-gray-400">Cargando buscador...</p>
    </div>
  </div>
</div>

<script>
  // Cargar el script de Pagefind de manera dinámica
  window.addEventListener('load', () => {
    const script = document.createElement('script');
    script.src = '/_pagefind/pagefind-ui.js';
    script.onload = () => {
      const searchElement = document.getElementById('search');
      if (searchElement) {
        new window.PagefindUI({ 
          element: "#search", 
          bundlePath: "/_pagefind/", 
          pageSize: 5,
          showEmptyFilters: false,
          showImages: true,
          showEmptySearch: true,
          resetStyles: true,
          searchUrl: "/_pagefind/search-index.json"
        });
      }
    };
    document.head.appendChild(script);
  });
</script>

<style>
  .search-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
  }
  .search-header {
    text-align: center;
    margin-bottom: 2rem;
  }
  .loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
</style> 